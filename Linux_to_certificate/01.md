# КУРС: Терминал Linux. Основы работы в командной строке

## Содержание

+ [1. Введение](#1-введение)
  + [1.1 Установка Linux Ubuntu как виртуальной машины](#11-установка-linux-ubuntu-как-виртуальной-машины)
  + [1.2 Разворачивание Linux "в облаках"](#12-разворачивание-linux-в-облаках)
  + [1.3 Настройка SSH-сервера](#13-настройка-ssh-сервера)
  + [1.4 Резюме модуля `Введение`. Контрольные вопросы](#14-резюме-модуля-введение-контрольные-вопросы)
+ [2. Знакомство с терминалом](#2-знакомство-с-терминалом)
  + [2.1 Трюки и лайфхаки в терминале](#21-трюки-и-лайфхаки-в-терминале)
  + [2.2 Список горячих клавиш в терминале Linux](#22-список-горячих-клавиш-в-терминале-linux)
  + [2.3 Основные команды для навигации по папкам](#23-основные-команды-для-навигации-по-папкам)
  + [2.4 Создание файлов и папок](#24-создание-файлов-и-папок)
  + [2.5 Основные операции с файлами](#25-основные-операции-с-файлами)
    + [2.6 Просмотр файлов](#26-просмотр-файлов)
  + [2.7 Резюме модуля `Знакомство с терминалом`. Контрольные вопросы](#27-резюме-модуля-знакомство-с-терминалом-контрольные-вопросы)
+ [3. Редактирование файлов](#3-редактирование-файлов)
  + [3.1 Nano. Дружественный к пользователю текстовый редактор](#31-nano-дружественный-к-пользователю-текстовый-редактор)
  + [3.2 Vim. Редактор по умолчанию](#32-vim-редактор-по-умолчанию)
    + [Общие сведения](#общие-сведения)
    + [Режимы](#режимы)
    + [Перемещение по тексту (Normal)](#перемещение-по-тексту-normal)
    + [Прокрутка текста](#прокрутка-текста)
    + [Работа с текстом](#работа-с-текстом)
    + [Поиск и замена](#поиск-и-замена)
    + [Режим визуального выделения](#режим-визуального-выделения)
    + [Работа с многооконным интерфейсом](#работа-с-многооконным-интерфейсом)
    + [Работа с буферами и файлами](#работа-с-буферами-и-файлами)
    + [Рабочие команды](#рабочие-команды)
    + [Полезные команды](#полезные-команды)
    + [Быстрое переключение режимов](#быстрое-переключение-режимов)
    + [Повторить вставку](#повторить-вставку)
    + [Команда с помощью клавиши Insert](#команда-с-помощью-клавиши-insert)
    + [Командный режим редактирования](#командный-режим-редактирования)
    + [Редактирование и макросы](#редактирование-и-макросы)
    + [Быстрое перемещение](#быстрое-перемещение)
    + [Работа с областями и закладками (marks)](#работа-с-областями-и-закладками-marks)
    + [Редактирование одного файла (Ex commands)](#редактирование-одного-файла-ex-commands)
    + [Режимы поиска и замены](#режимы-поиска-и-замены)
    + [Настройки Vim (опции)](#настройки-vim-опции)
    + [Полезные команды для редактирования](#полезные-команды-для-редактирования)
  + [Быстрый доступ к файлу .vimrc (настроек vim)](#быстрый-доступ-к-файлу-vimrc-настроек-vim)
  + [3.3 Vimtutor. Обучалка по редактору Vim.](#33-vimtutor-обучалка-по-редактору-vim)
  + [3.4 Резюме модуля `Редактирование файлов`. Контрольные вопросы.](#34-резюме-модуля-редактирование-файлов-контрольные-вопросы)
+ [4. Поиск файлов](#4-поиск-файлов)
  + [4.1 Команда find](#41-команда-find)
+ [5. Промежуточные итоги](#5-промежуточные-итоги)
  + [5.1 Шпаргалка по редактору Nano](#51-шпаргалка-по-редактору-nano)
  + [5.2 Шпаргалка по горячим клавишам Vim](#52-шпаргалка-по-горячим-клавишам-vim)
  + [5.3 Тест по пройденному материалу](#53-тест-по-пройденному-материалу)
  + [5.4 Домашнее задание](#54-домашнее-задание)
+ [6. Файловая структура](#6-файловая-структура)
  + [6.1 Важные директории, утилиты, архивирование](#61-важные-директории-утилиты-архивирование)
  + [6.2 Резюме модуля `Файловая структура`. Контрольные вопросы.](#62-резюме-модуля-файловая-структура-контрольные-вопросы)
+ [7. Управление пользователями и группами](#7-управление-пользователями-и-группами)
  + [7.1 Вывод информации о пользователях](#71-вывод-информации-о-пользователях)
  + [7.2 Создание пользователей](#72-создание-пользователей)
  + [7.3 Изменение пользователей](#73-изменение-пользователей)
  + [7.4 Права root, удаление пользователей](#74-права-root-удаление-пользователей)
  + [7.5 Управление группами](#75-управление-группами)
  + [7.6 Резюме модуля `Управление пользователями`. Контрольные вопросы](#76-резюме-модуля-управление-пользователями-контрольные-вопросы)
+ [8. Права доступа (rwx)](#8-права-доступа-rwx)
  + [8.1 Вывод информации + команда chmod](#81-вывод-информации--команда-chmod)
  + [8.2 Смена владельцев и групп](#82-смена-владельцев-и-групп)
  + [8.3 Специальные биты, права по умолчанию](#83-специальные-биты-права-по-умолчанию)
  + [8.4 Резюме модуля `Права доступа`. Контрольные вопросы](#84-резюме-модуля-права-доступа-контрольные-вопросы)
+ [9. Важные инструменты терминала Linux](#9-важные-инструменты-терминала-linux)
  + [9.1 Ссылки, iNodes](#91-ссылки-inodes)
  + [9.2 Потоки ввода-вывода](#92-потоки-ввода-вывода)
  + [9.3 Конвейер обработки команд](#93-конвейер-обработки-команд)
  + [9.4 Резюме модуля `Важные инструменты`. Контрольные вопросы](#94-резюме-модуля-важные-инструменты-контрольные-вопросы)
+ [10. Инструменты для мониторинга](#10-инструменты-для-мониторинга)
  + [10.1 Утилита top (диспетчер задач)](#101-утилита-top-диспетчер-задач)
  + [10.2 Утилиты htop, ps, kill, systemctl](#102-утилиты-htop-ps-kill-systemctl)
  + [10.3 Резюме модуля `Инструменты для мониторинга`. Контрольные вопросы](#103-резюме-модуля-инструменты-для-мониторинга-контрольные-вопросы)
+ [11. Управление программным обеспечением](#11-управление-программным-обеспечением)
  + [11.1 Утилита apt / apt-get](#111-утилита-apt--apt-get)
  + [11.2 Утилиты dpkg, snap](#112-утилиты-dpkg-snap)
  + [11.3 Добавление репозитория](#113-добавление-репозитория)
  + [11.4 Резюме модуля `Управление ПО`. Контрольные вопросы](#114-резюме-модуля-управление-по-контрольные-вопросы)
+ [12. Планировщик задач](#12-планировщик-задач)
  + [12.1 Служба cron, утилита crontab](#121-служба-cron-утилита-crontab)
  + [12.2 Настройка логов, задачи других пользователей](#122-настройка-логов-задачи-других-пользователей)
  + [12.3 Резюме модуля `Планировщик задач`. Контрольные вопросы](#123-резюме-модуля-планировщик-задач-контрольные-вопросы)
+ [13. Работа с фаерволом (утилита iptables)](#13-работа-с-фаерволом-утилита-iptables)
  + [13.1 Просмотр, добавление, удаление правил](#131-просмотр-добавление-удаление-правил)
  + [13.2 Политики по умолчанию, сохранение правил](#132-политики-по-умолчанию-сохранение-правил)
  + [13.3 Резюме модуля `Работа с фаерволом`. Контрольные вопросы](#133-резюме-модуля-работа-с-фаерволом-контрольные-вопросы)
+ [14. Bash](#14-bash)
  + [14.1 История создания, запуск скриптов, оболочка](#141-история-создания-запуск-скриптов-оболочка)
  + [14.2 Синтаксис Bash: условия, ветвления](#142-синтаксис-bash-условия-ветвления)
  + [14.3 Синтаксис Bash: циклы, функции](#143-синтаксис-bash-циклы-функции)
  + [14.4 Резюме модуля `Bash`. Контрольные вопросы](#144-резюме-модуля-bash-контрольные-вопросы)

[Оглавление](/Linux_to_certificate/README.md)

## 1. Введение

### 1.1 Установка Linux Ubuntu как виртуальной машины

[Video](/Linux_to_certificate/videos/01_01_Установка_Linux_Ubuntu_как_виртуальнои_машины_Stepik.mp4)

**Полезные ссылки:**

Скачать VirtualBox: [ссылка](https://www.virtualbox.org/wiki/Downloads)

Скачать Linux Ubuntu: [Ссылка](https://ubuntu.com/download/desktop)

---
[Содержание](#содержание)

### 1.2 Разворачивание Linux "в облаках"

[Video](/Linux_to_certificate/videos/01_02_Разворачивание_Linux_в_облаках_Stepik.mp4)

**Ссылки на "облачные сервисы":**

+ [www.reg.ru](https://www.reg.ru/)
+ [cloud.vk.com](https://cloud.vk.com/)

---
[Содержание](#содержание)

### 1.3 Настройка SSH-сервера

[Video](/Linux_to_certificate/videos/01_03_Настроика_SSH_сервера_Stepik.mp4)

**Полезные ссылки:**

+ Скачать SSH-клиент [Putty](https://www.putty.org/)

---
[Содержание](#содержание)

### 1.4 Резюме модуля `Введение`. Контрольные вопросы

#### Какой номер порта используется по умолчанию для подключения по SSH протоколу?

+ [ ] 8080
+ [ ] 80
+ [x] 22
+ [ ] 443

#### Начиная с какой версии Windows в ней появилась возможность выполнять подключение по SSH протоколу прямо из терминала ОС?

+ [ ] Windows 95
+ [ ] Windows 7
+ [x] Windows 10
+ [ ] Windows 11

#### Укажите корректный вариант строки подключения к удаленной Linux машине из Windows машины про SSH протоколу (c паролем)

Дано.<br>
Имя Linux-пользователя: itguy<br>
Имя Windows-пользователя: hostguy<br>
IP-адрес целевой Linux машины: 192.168.1.10

+ [x] ssh itguy@192.168.1.10
+ [ ] ssh 192.168.1.10@hostguy
+ [ ] ssh 192.168.1.10@itguy
+ [ ] ssh hostguy@192.168.1.10

---
[Содержание](#содержание)

## 2. Знакомство с терминалом

### 2.1 Трюки и лайфхаки в терминале

[Video](/Linux_to_certificate/videos/02_01_Трюки_и_лаифхаки_в_терминале_Stepik.mp4)

**Конспект урока:**

**Список изученных команд:**

+ `clear` -  очистить окно терминала
+ `reset` -  сбросить настройки терминала
+ `whatis`  - однострочная справка по командам
+ Ключ `--help` - краткая справка по командам
+ `man`, `info` - подробная справка по командам
+ `apropos` - поиск по справке
+ `history` - вывод истории команд

**Горячие клавиши:**

+ `Ctrl+L` - очистить окно терминала
+ `Ctrl+U` - стереть текст слева от курсора
+ `Ctrl+K` - стереть текст справа от курсора

---
[Содержание](#содержание)

### 2.2 Список горячих клавиш в терминале Linux

#### Горячие клавиши в терминале Linux

(текст взят из официальной документации, поэтому он на английском языке)

Shortcut | Action
-- | --
|**Bash Navigation (Баш-навигация):** ||
`Ctrl + A` | Move to the start of the command line<br> Перейти в начало командной строки.
`Ctrl + E` | Move to the end of the command line<br> Перейти в конец командной строки
`Ctrl + F` | Move one character forward<br> Переместиться на один символ вперед
`Ctrl + B` | Move one character backward<br> Переместить один символ назад
`Ctrl + XX` | Switch cursor position between start of the command line and the current position<br> Переключить положение курсора между началом командной строки и текущей позицией.
`Ctrl + ] + x` | Moves the cursor forward to next occurrence of x<br> Перемещает курсор вперед к следующему вхождению x.
`Alt + F` / `Esc + F` | Moves the cursor one word forward<br> Перемещает курсор на одно слово вперед.
`Alt + B` / `Esc + B` | Moves the cursor one word backward<br> Перемещает курсор на одно слово назад.
`Alt + Ctrl + ] + x` | Moves cursor to the previous occurrence of x<br> Перемещает курсор к предыдущему вхождению x.
|**Bash Control/Process (Bash-управление/процесс)**||
`Ctrl + L` | Similar to clear command, clears the terminal screen<br> Аналогично команде очистки, очищает экран терминала.
`Ctrl + S` | Stops command output to the screen<br> Останавливает вывод команды на экран.
`Ctrl + Z` | Suspends current command execution and moves it to the background<br> Приостанавливает выполнение текущей команды и перемещает ее на задний план.
`Ctrl + Q` | Resumes suspended command<br> Возобновляет приостановленную команду
`Ctrl + C` | Sends SIGI signal and kills currently executing command<br> Отправляет сигнал SIGI и уничтожает выполняющуюся в данный момент команду.
`Ctrl + D` | Closes the current terminal<br> Закрывает текущий терминал.
|**Bash History (История Баша)**||
`Ctrl + R` | Incremental reverse search of bash history<br> Инкрементный обратный поиск в истории bash
`Alt + P` | Non-incremental reverse search of bash history<br> Неинкрементный обратный поиск в истории bash
`Ctrl + J` | Ends history search at current command<br> Завершает поиск в истории по текущей команде.
`Ctrl + _` | Undo previous command<br> Отменить предыдущую команду
`Ctrl + P` / `Up arrow` | Moves to previous command<br> Переход к предыдущей команде.
`Ctrl + N` / `Down arrow` | Moves to next command<br> Переход к следующей команде
`Ctrl + S` | Gets the next most recent command<br> Получает следующую последнюю команду.
`Ctrl + O` | Runs and re-enters the command found via `Ctrl + S` and `Ctrl + R`<br> Запускает и повторно вводит команду, найденную с помощью `Ctrl + S` и `Ctrl + R`.
`Ctrl + G` | Exits history search mode<br> Выход из режима поиска по истории
`!!` | Runs last command<br> Выполняет последнюю команду
`!*` | Runs previous command except its first word<br> Выполняет предыдущую команду, кроме ее первого слова.
`!*:p` | Displays what `!*` substitutes<br> Отображает то, что `!*` заменяет
`!x` | Runs recent command in the bash history that begins with x<br> Запускает последнюю команду в истории bash, которая начинается с x.
`!x:p` | Displays the x command and adds it as the recent command in history<br> Отображает команду x и добавляет ее как последнюю команду в истории.
`!$` | Same as OPTION+., brings forth last argument of the previous command<br> То же, что и OPTION+., выводит последний аргумент предыдущей команды.
`!^` | Substitutes first argument of last command in the current command<br> Заменяет первый аргумент последней команды в текущей команде.
`!$:p` | Displays the word that `!$` substitutes<br> Отображает слово, которое заменяет `!$`
`^123^abc` | Replaces 123 with abc<br> Заменяет 123 на abc.
`!n:m` | Repeats argument within a range (i.e, m 2-3)<br> Повторяет аргумент в пределах диапазона (т. е. m 2–3).
`!fi` | Repeats latest command in history that begins with `fi`<br> Повторяет последнюю команду в истории, которая начинается с `fi`.
`!n` | Run nth command from the bash history<br> Запустить n-ю команду из истории bash
`!n:p` | Prints the command !n executes<br> Печатает команду, которую `!n` выполняет
`!n:$` | Repeat arguments from the last command (i.e, from argument n to $)<br> Повторить аргументы последней команды (т.е. от аргумента n до)
|**Bash Editing (Редактирование Bash)**||
`Ctrl + U` | Deletes before the cursor until the start of the command<br> Удаляет перед курсором до начала команды
`Ctrl + K` | Deletes after the cursor until the end of the command<br> Удаляет после курсора до конца команды
`Ctrl + W` | Removes the command/argument before the cursor<br> Удаляет команду/аргумент перед курсором.
`Ctrl + D` | Removes the character under the cursor<br> Удаляет символ под курсором.
`Ctrl + H` | Removes character before the cursor<br> Удаляет символ перед курсором.
`Alt + D` | Removes from the character until the end of the word<br> Удаляет из символа до конца слова.
`Alt + Backspace` | Removes from the character until the start of the word<br> Удаляет из символа до начала слова.
`Alt + . / Esc+.` | Uses last argument of previous command<br> Использует последний аргумент предыдущей команды
`Alt + <` | Moves to the first line of the bash history<br> Переходит на первую строку истории bash.
`Alt + >` | Moves to the last line of the bash history<br> Переход к последней строке истории bash.
`Esc + T` | Switch between last two words before cursor<br> Переключение между двумя последними словами перед курсором.
`Alt + T` | Switches current word with the previous<br> Переключает текущее слово с предыдущим.
|**Bash Information (Информация о Баше)**||
`TAB` | Autocompletes the command or file/directory name<br> Автоматически заполняет команду или имя файла/каталога.
`~TAB TAB` | List all Linux users<br> Список всех пользователей Linux
`Ctrl + I` | Completes the command like TAB<br> Завершает команду, например TAB.
`Alt + ?` | Display files/folders in the current path for help<br> Отобразить файлы/папки по текущему пути для получения справки.
`Alt + *` | Display files/folders in the current path as parameter<br> Отобразить файлы/папки по текущему пути в качестве параметра.

---
[Содержание](#содержание)

### 2.3 Основные команды для навигации по папкам

[Video](/Linux_to_certificate/videos/02_03_Основные_команды_для_навигации_по_папкам_Stepik.mp4)

**Список изученных команд:**

+ `pwd` -  (print working directory) вывести путь к текущей папке
+ `cd` -  (change directory) сменить папку
+ `ls`  - вывести содержимое папки
+ `ll` - псевдоним для ls -la

---
[Содержание](#содержание)

### 2.4 Создание файлов и папок

[Video](/Linux_to_certificate/videos/02_04_Создание_фаилов_и_папок_Stepik.mp4)

Список изученных команд:

+ `mkdir` -  (make directory) создать новую папку
+ `tree` -  вывести файловую структуру в виде дерева
+ `touch` -  создать файл
+ `echo`  - вывести текст на экран (или отправить в файл)
+ `cat`- (concatenate) вывод "склеенного" содержимого файлов

---
[Содержание](#содержание)

### 2.5 Основные операции с файлами

[Video](/Linux_to_certificate/videos/02_05_Основные_операции_с_фаилами_Stepik.mp4)

Список изученных команд:

+ `cp` -  (copy) копировать файл или папку
+ `mv` -  (move) переместить/переименовать файл или папку
+ `rm` -  (remove) удалить файл или папку

---
[Содержание](#содержание)

### 2.6 Просмотр файлов

[Video](/Linux_to_certificate/videos/02_06_Просмотр_фаилов_Stepik.mp4)

Список изученных утилит:

+ `more` -  постраничный просмотр содержимого файла
+ `less` -  постраничный просмотр содержимого файла
+ `head` - просмотр первых строк файла
+ `tail` -  просмотр последних строк файла

**Полезные ссылки:**

+ Файл поэмы Ромэо и Джульетта (на английском): [link](https://stepik.org/media/attachments/lesson/1101187/Romeo_and_Juliet_poem.txt)
+ вариант 2: [link](https://www.gutenberg.org/files/1112/1112-0.txt)

---
[Содержание](#содержание)

### 2.7 Резюме модуля `Знакомство с терминалом`. Контрольные вопросы

Какое сочетание клавиш мы используем, чтобы очистить/удалить текст слева от курсора (в строке для ввода команд)?

+ [ ] `Ctrl+L`
+ [ ] `Ctrl+K`
+ [x] `Ctrl+U`

Какую команду мы используем для вызова справки в терминале Linux?

+ [ ] команду `whatis`
+ [ ] опцию `--help`
+ [ ] команду `man`
+ [x] Все ответы выше

Какая команда используется для переименования файла?

+ [ ] `rm`
+ [x] `mv`
+ [ ] `cp`
+ [ ] `rn`

---
[Содержание](#содержание)

## 3. Редактирование файлов

### 3.1 Nano. Дружественный к пользователю текстовый редактор

[Video](/Linux_to_certificate/videos/03_01_Nano_Дружественныи_к_пользователю_текстовыи_редактор_Stepik.mp4)

[Шпаргалка по редактору Nano (на английском  языке) Stepik](https://stepik.org/media/attachments/lesson/1101189/Cheatsheet_for_GNU_nano.pdf) <br>
[Шпаргалка по редактору Nano (на английском  языке)](/Lib/Cheatsheet_for_GNU_nano.pdf)

---
[Содержание](#содержание)

### 3.2 Vim. Редактор по умолчанию

[Video](/Linux_to_certificate/videos/03_02_Vim_Редактор_по_умолчанию_Stepik.mp4)

[Шпаргалка по редактору Vim (на английском языке)](/Lib/Vim_Cheat_Sheet.pdf)

#### Общие сведения

+ `:q` - Выйти из Vim.
+ `:q!` - Выйти из Vim без сохранения изменений.
+ `:w` - Сохранить файл.
+ `:wq` или `:x` - Сохранить файл и выйти.
+ `:e` файл - Открыть файл.
+ `:help` тема - Получить подсказку по теме (:help открывает общую справку).

#### Режимы

+ `Esc` - Вернуться в нормальный режим.
+ `i` - Вставка перед курсором.
+ `I` - Вставка в начале строки.
+ `a` - Вставка после курсора.
+ `A` - Вставка в конце строки.
+ `o` - Вставка новой строки ниже текущей.
+ `O` - Вставка новой строки выше текущей.

#### Перемещение по тексту (Normal)

+ `h` - Влево.
+ `j` - Вниз.
+ `k` - Вверх.
+ `l` - Вправо.

+ `w` - Вперед к началу следующего слова.
+ `b` - Назад к началу предыдущего слова.
+ `e` - Вперед к концу слова.
+ `ge` - Назад к концу слова.

+ `0` (нуль) - В начало текущей строки.
+ `^` - В начало первой непустой символа строки.
+ `$` - В конец строки.
+ `gg` - В начало файла.
+ `G` - В конец файла.
+ `nG` - Перейти к строке n (например, 10G - перейти к 10-й строке).

#### Прокрутка текста

+ `Ctrl + u` - Прокрутить вверх на полстраницы.
+ `Ctrl + d` - Прокрутить вниз на полстраницы.
+ `Ctrl + b` - Прокрутить вверх на страницу.
+ `Ctrl + f` - Прокрутить вниз на страницу.
+ `zz` - Прокрутить до центра экрана.

#### Работа с текстом

+ `x` - Удалить символ под курсором.
+ `X` - Удалить символ перед курсором.
+ `dd` - Удалить текущую строку.
+ `d`$ - Удалить от курсора до конца строки.
+ `d0` - Удалить от курсора до начала строки.
+ `dw` - Удалить от курсора до конца слова.
+ `daw` - Удалить все слово под курсором.

+ `yy` или `Y` - Копировать текущую строку.
+ `yw` - Копировать слово.
+ `p` - Вставить после курсора.
+ `P` - Вставить перед курсором.

+ `u` - Отменить последнее действие.
+ `Ctrl + r` - Повторить отмененное действие.
+ `.` - Повторить последнее изменение.

#### Поиск и замена

+ `/` - Начать поиск.
+ `?` - Начать поиск назад.
+ `n` - Найти следующее вхождение.
+ `N` - Найти предыдущее вхождение.
+ `:%s/старый/новый/g` - Заменить "старый" на "новый" во всём файле.
+ `:%s/старый/новый/gc` - Заменить с подтверждением для каждой замены.

#### Режим визуального выделения

+ `v` - Войти в режим визуального выделения.
+ `V` - Визуальный режим выделения строк.
+ `Ctrl + v` - Визуальный блочный режим.

#### Работа с многооконным интерфейсом

+ `:split` файл или `:sp` файл - Разделить окно горизонтально (можно указать файл).
+ `:vsplit` файл или `:vsp` файл - Разделить окно вертикально (можно указать файл).
+ `Ctrl + w`, `w` - Переключение между окнами.
+ `Ctrl + w`, `q` - Закрыть текущее окно.
+ `Ctrl + w`, `s` - Разделить окно горизонтально.
+ `Ctrl + w`, `v` - Разделить окно вертикально.

#### Работа с буферами и файлами

+ :`e` файл - Открыть файл.
+ :`bnext` или `:bn` - Перейти к следующему буферу.
+ :`bprev` или `:bp` - Перейти к предыдущему буферу.
+ :`bd` буфер - Закрыть буфер.
+ :`ls` - Показать список открытых буферов.
+ :`b` номер - Перейти к буферу по номеру.

#### Рабочие команды

+ `:!команда` - Выполнить внешнюю команду (например, `:!ls`).
+ `:r !команда` - Вставить результат выполнения команды в файл.

#### Полезные команды

+ `:set number` или `:set nu` - Включить номера строк.
+ `:set nonumber` или `:set nonu` - Выключить номера строк.
+ `:set autoindent` - Включить автоотступы.
+ `:set smartindent` - Включить умные отступы.

#### Быстрое переключение режимов

+ `Ctrl + o` - Быстрое возвращение в нормальный режим из режима вставки, чтобы выполнить одну команду, затем вернуться обратно в режим вставки.
+ `Ctrl + **` - Альтернативный способ выйди из режима вставки в нормальный режим.

#### Повторить вставку

+ `Ctrl + @` - Повторить последнюю команду вставки. Это помогает повторить текст, который вы вставили последним.

#### Команда с помощью клавиши Insert

+ `Insert` - Переключиться между режимом вставки и нормальным режимом. Если вы случайно включили режим замены (то есть тексты пишутся поверх текста), нажмите опять `Insert` для возвращения в нормальный режим вставки.

#### Командный режим редактирования

+ `q:` или `q/` - Откроет список последних команд или строк поиска в нижней части экрана, где можно редактировать и повторно выполнять команды.

#### Редактирование и макросы

+ `qa` - Начать запись макроса в регистр 'a' (можно использовать любой доступный регистр).
+ `q` - Закончить запись макроса.
+ `@a` - Воспроизвести макрос из регистра 'a'.
+ `@@` Повторно воспроизвести последний использованный макрос.

#### Быстрое перемещение

+ `H` - Перейти в верхнюю часть экрана.
+ `M` - Перейти в середину экрана.
+ `L` - Перейти в нижнюю часть экрана.

#### Работа с областями и закладками (marks)

+ `m{знак}` - Установить закладку с указанным знаком (a-z).
+ `'{знак}` - Перейти к началу строки с закладкой.
+ ``{знак}` - Перейти точно к позиции с закладкой.

#### Редактирование одного файла (Ex commands)

+ `:r [файл` - Вставить содержимое указанного файла в текущий буфер.
+ `:w файл` - Сохранить текущий буфер в указанный файл.

#### Режимы поиска и замены

+ `:noh` или `:nohl` - Отключить подсветку найденных слов после поиска.

#### Настройки Vim (опции)

+ `:set incsearch` - Включить инкрементальный поиск.
+ `:set hlsearch` - Включить подсветку найденных выражений (настройка по умолчанию может быть отключена).
+ `:set ignorecase` - Игнорировать регистр при поиске.
+ `:set smartcase` - Игнорировать регистр при поиске, если текст в нижнем регистре; иначе, учитывать регистр.

#### Полезные команды для редактирования

+ `Ctrl + a` - Увеличить число под курсором.
+ `Ctrl + x` - Уменьшить число под курсором.
+ `gU` - Преобразовать до конца выделения в верхний регистр.
+ `gu` - Преобразовать до конца выделения в нижний регистр.

#### Быстрый доступ к файлу .vimrc (настроек vim)

+ `:e $MYVIMRC` - Открыть файл настроек вашего Vim для редактирования.
+ `:source $MYVIMRC` - Перезагрузить файл настроек после его изменений.

---
[Содержание](#содержание)

### 3.3 Vimtutor. Обучалка по редактору Vim

[Video](/Linux_to_certificate/videos/03_3_Vimtutor_Обучалка_по_редактору_Vim_Stepik.mp4)

---
[Содержание](#содержание)

### 3.4 Резюме модуля `Редактирование файлов`. Контрольные вопросы

#### Какой редактор из перечисленных используется в ОС Linux по умолчанию в большинстве дистрибутивов?

+ [ ] nano
+ [x] vim
+ [ ] pico

#### Как можно выйти из редактора Vim и сохранить изменения одной командой?

+ [ ] `:qw`
+ [x] `:wq`
+ [ ] `:w!`
+ [ ] `:q!`

#### Какая команда сделает резервную копию файла при его сохранении?

+ [ ] `nano myfile.txt -s`
+ [ ] `nano myfile.txt -b`
+ [ ] `nano myfile.txt`
+ [x] `nano myfile.txt -B`

---
[Содержание](#содержание)

## 4. Поиск файлов

### 4.1 Команда find

[Video](/Linux_to_certificate/videos/04_01_Команда_find_Stepik.mp4)

---
[Содержание](#содержание)

## 5. Промежуточные итоги

### 5.1 Шпаргалка по редактору Nano

Горячие клавиши в редакторе Nano
(текст взят из официальной документации, поэтому он на английском языке)

||File handling | Обработка файлов
-|-|-
`Ctrl+S` | Save current file | Сохранить текущий файл
`Ctrl+O` | Offer to write file ("Save as") | Предложить записать файл («Сохранить как»)
`Ctrl+R` | Insert a file into current one | Вставить файл в текущий
`Ctrl+X` | Close buffer, exit from nano | Закрыть буфер, выйти из nano

||Editing | Редактирование
-|-|-
`Ctrl+K`| Cut current line into cutbuffer | Вырезать текущую строку в буфер
`Alt+6`| Copy current line into cutbuffer | Копировать текущую строку в буфер
`Ctrl+U`| Paste contents of cutbuffer | Вставить содержимое буфера
`Alt+T`| Cut until end of buffer | Вырезать до конца буфера
`Ctrl+]`| Complete current word | Завершить текущее слово
`Alt+3`| Comment/uncomment line/region | Комментировать/раскомментировать строку/область
`Alt+U`| Undo last action | Отменить последнее действие
`Alt+E`| Redo last undone action | Повторить последнее отмененное действие

||Search and replace | Поиск и замена
-|-|-
`Ctrl+Q` | Start backward search | Начать обратный поиск
`Ctrl+W` | Start forward search | Начать поиск вперед
`Alt+Q` | Find next occurrence backward | Найти следующее вхождение назад
`Alt+W` | Find next occurrence forward | Найти следующее вхождение вперед
`Alt+R` | Start a replacing session | Начать сеанс замены

||Deletion|Удаление
-|-|-
`Ctrl+H` | Delete character before cursor | Удалить символ перед курсором
`Ctrl+D` | Delete character under cursor | Удалить символ под курсором
`Alt+Bsp` | Delete word to the left | Удалить слово слева
`Ctrl+Del` | Delete word to the right | Удалить слово справа
`Alt+Del` | Delete current line | Удалить текущую строку

||Operations|Операции
-|-|-
`Ctrl+T`| Execute some command | Выполнить какую-либо команду
`Ctrl+J`| Justify paragraph or region | Выравнивание абзаца или области
`Alt+J`| Justify entire buffer | Выровнять весь буфер
`Alt+B`| Run a syntax check | Запустить проверку синтаксиса
`Alt+F`| Run a formatter/fixer/arranger | Запустить форматтер/фиксатор/аранжировщик
`Alt+:`| Start/stop recording of macro | начать/остановить запись макроса.
`Alt+;`| Replay macro | Воспроизвести макрос

||Moving around|Перемещение
-|-|-
`Ctrl+B` | One character backward | На один символ назад
`Ctrl+F` | One character forward | На один символ вперед
`Ctrl+←` | One word backward | На одно слово назад
`Ctrl+→` | One word forward | На одно слово вперед
`Ctrl+A` | To start of line | В начало строки
`Ctrl+E` | To end of line | В конец строки
`Ctrl+P` | One line up | В одну строку
`Ctrl+N` | One line down | На одну строку вниз
`Ctrl+↑` | To previous block | К предыдущему блоку
`Ctrl+↓` | To next block | К следующему блоку
`Ctrl+Y` | One page up | На одну страницу вверх
`Ctrl+V` | One page down | На одну страницу вниз
`Alt+\` | To top of buffer | В начало буфера
`Alt+/` | To end of buffer | До конца буфера

||Special movement|Специальные перемещения
-|-|-
`Alt+G` | Go to specified line | Перейти к указанной строке
`Alt+]` | Go to complementary bracket | Перейти к дополнительной скобке.
`Alt+↑` | Scroll viewport up | Прокрутить область просмотра вверх
`Alt+↓` | Scroll viewport down | Прокрутить область просмотра вниз
`Alt+<` | Switch to preceding buffer | Переключиться на предыдущий буфер
`Alt+>` | Switch to succeeding buffer | Переключиться на следующий буфер

||Information|Информация
-|-|-
`Ctrl+C` | Report cursor position | Сообщить о положении курсора
`Alt+D` | Report line/word/character count | Количество строк/слов/символов отчета
`Ctrl+G` | Display help text | Отображение текста справки

||Various|Разное
-|-|-
`Alt+A` | Turn the mark on/off TabIndent marked region | Включить/выключить отметку TabIndent отмеченную область
`Shift+Tab` |   Unindent marked region | Отменить отступ отмеченной области
`Alt+V` | Enter next keystroke verbatim | Ввести следующее нажатие клавиши дословно
`Alt+N` | Turn line numbers on/off | Включить/выключить номера строк
`Alt+P` | Turn visible whitespace on/off | Включить/выключить видимые пробелы
`Alt+X` | Hide or unhide the help lines | Скрыть или показать вспомогательные строки
`Ctrl+L` | Refresh the screen | Обновить экран.

---
[Содержание](#содержание)

### 5.2 Шпаргалка по горячим клавишам Vim

Шпаргалка по редактору Vim
(текст взят из официальной документации, поэтому он на английском языке)

|Cursor movement<br> (Normal/Visual Mode)||
-|-
`h` `j` `k` `l` | Arrow keys
`w` / `b` | Next/previous word
`W` / `B` | Next/previous word (space seperated)
`e` / `ge` | Next/previous end of word
`0` / `$` | Start/End of line
`^` | First non-blank character of line (same as 0w)

|Editing text||
-|-
`i` / `a` | Start insert mode at/after cursor
`I` / `A` | Start insert mode at the beginning/end of the line
`o` / `O` | Add blank line below/above current line
`Esc` or `Ctrl+[` | Exit insert mode
`d` | Delete
`dd` | Delete line
`c` | Delete, then start insert mode
`cc` | Delete line, then start insert mode

|Operators| Operators also work in Visual Mode|
-|-
`d` | Deletes from the cursor to the movement location
`c` | Deletes from the cursor to the movement location, then starts insert mode
`y` | Copy from the cursor to the movement location
`>` | Indent one level
`<` | Unindent one level

**You can also combine operators with motions. Ex: d$ deletes from the cursor to the end of the line.**

|Marking text <br> (visual mode)||
-|-
`v` | Start visual mode
`V` | Start linewise visual mode
`Ctrl+v` | Start visual block mode
`Esc` or `Ctrl+[` | Exit visual mode

|Clipboard||
-|-
`yy` | Yank (copy) a line
`p` | Paste after cursor
`P` | Paste before cursor
`dd` | Delete (cut) a line
`x` | Delete (cut) current character
`X` | Delete (cut) previous character
`d` / `c` | By default, these copy the deleted text

|Exiting||
-|-
`:w` | Write (save) the file, but don’t quit
`:wq` | Write (save) and quit
`:q` | Quit (fails if anything has changed)
`:q!` | Quit and throw away changes

|Search/Replace||
-|-
`/pattern` | Search for pattern
`?pattern` | Search backward for pattern
`n` | Repeat search in same direction
`N` | Repeat search in opposite direction
`:%s/old/new/g` | Replace all old with new throughout file (gn is better though)
`:%s/old/new/gc` | Replace all old with new throughout file with confirmations

|General||
-|-
`u` | Undo
`Ctrl+r` | Redo

**Advanced:**

|Cursor movement||
-|-
`Ctrl+d` | Move down half a page
`Ctrl+u` | Move up half a page
`}` | Go forward by paragraph (the next blank line)
`{` | Go backward by paragraph (the next blank line)
`gg` | Go to the top of the page
`G` | Go the bottom of the page
`: [num] [enter]` | Go to that line in the document
`ctrl+e / ctrl+y` | Scroll down/up one line

|Character search||
-|-
`f [char]` | Move forward to the given char
`F [char]` | Move backward to the given char
`t [char]` | Move forward to before the given char
`T [char]` | Move backward to before the given char
`;` / `,` | Repeat search forwards/backwards

|Editing text||
-|-
`J` | Join line below to the current one
`r [char]` | Replace a single character with the specified char (does not use Insert mode)

|Visual mode||
-|-
`O` | Move to other corner of block
`o` | Move to other end of marked area

|File Tabs||
-|-
`:e filename` | Edit a file
`:tabe` | Make a new tab
`gt` | Go to the next tab
`gT` | Go to the previous tab
`:vsp` | Vertically split windows
`ctrl+ws` | Split windows horizontally
`ctrl+wv` | Split windows vertically
`ctrl+ww` | Switch between windows
`ctrl+wq` | Quit a window

|Marks|Marks allow you to jump to designated points in your code.|
-|-
`m{a-z}` | Set mark {a-z} at cursor position <br>**A capital mark {A-Z} sets a global mark and will work between files**
`'{a-z}` | Move the cursor to the start of the line where the mark was set
`''` | Go back to the previous jump location

|Text Objects||
-|-
|Say you have `def (arg1, arg2, arg3)`, where your cursor is somewhere in the middle of the parenthesis.||
|`di(` deletes everything between the parenthesis. That says “change everything inside the nearest parenthesis”. Without text objects, you would need to do T(dt).||

[Learn more](http://blog.carbonfive.com/2011/10/17/vim-text-objects-the-definitive-guide/)

|General||
-|-
`.` | Repeat last command
`Ctrl+r + 0` | in insert mode inserts the last yanked text (or in command mode)
`gv` | reselect (select last selected block of text, from visual mode)
`%` | jumps between matching () or {}

---
[Содержание](#содержание)

### 5.3 Тест по пройденному материалу

#### Какой тип виртуальной машины мы учились разворачивать в данном курсе?

+ [ ] Локальную виртуальную машину Linux
+ [ ] Виртуальную машину "в облаках" (по подключению SSH)
+ [x] Оба перечисленные варианта

#### Какое сочетание клавиш мы используем для удаления текста слева от курсора в командной строке?

+ [ ] Ctrl+K
+ [x] Ctrl+U
+ [ ] Ctrl+L

```bash
#Ctrl+L # используется для очистки всего текста с экрана (скроллинг вверх до последней отображаемой строки)
#Ctrl+K # используется для очистки текста справа от курсора.
```

#### Как можно вызвать справку в терминале Linux?

+ [ ] команда `whatis`
+ [ ] опция `--help`
+ [ ] команда `man`
+ [x] Все перечисленные ответы

#### Как очистить историю недавно использованных команд в терминале?

+ [x] `history -c`
+ [ ] `sudo history`
+ [ ] `man clear`

```bash
## 'man' command is used to call for help
```

#### Что выполнит команда `cd /home` ?

+ [ ] Выведет на экран содержимое папки /home
+ [ ] Изменит текущую локацию на папку 'home', пытаясь найти ее в текущей локации
+ [x] Изменит текущую локацию на папку 'home' в корне файловой системы

#### Какая команда удаляет пустую папку (так называемое "безопасное удаление")?

+ [ ] rm
+ [ ] rm -r
+ [ ] mkdir
+ [x] rmdir

#### Какой текстовый редактор используется в большинстве дистрибутивов Linux по умолчанию?

+ [ ] McEdit
+ [ ] Pico
+ [x] Vim
+ [ ] Nano

#### Какая команда выведет последние 30 байт файла?

+ [ ] more  -30 myfile.txt
+ [x] tail -c 30 myfile.txt
+ [ ] head -c 30 myfile.txt
+ [ ] head -30 myfile.txt

#### Какая команда используется для переименования файла?

+ [x] mv
+ [ ] rename
+ [ ] cp
+ [ ] rm

#### Какая команда за раз создаст 3 файла в текущей папке?

+ [ ] `touch file1/file2/file3`
+ [ ] `touch file1,file2,file3`
+ [x] `touch file1 file2 file3`

#### Как с помощью команды find вывести все файлы, имена которых состоят ровно из 3 символов?

+ [ ] `find -iname *`
+ [ ] `find ***`
+ [x] `find ???`
+ [ ] `find *`

```bash
## Символ вопросительного знака (?) является псевдонимом любой буквы в имени файла (но строго для одной буквы).
```

#### Как в редакторе Vim сохранить изменения и выйти в терминал одной командой?

+ [ ] `:q!`
+ [ ] `:qw`
+ [ ] `:w!`
+ [x] `:wq`

```bash
## The correct sequence is write and quit. So 'w' first, and then 'q'.
```

---
[Содержание](#содержание)

### 5.4 Домашнее задание

#### Любимые фильмы

+ Создайте папку с именем «Favorite_movies» в домашнем каталоге вашего пользователя.
+ Измените свою текущую локацию на новую папку, которую вы только что создали.
+ Создайте там файл с именем «my_top_10_movies.txt».
+ Заполните файл своими любимыми фильмами.
+ Выведите в окно терминала содержимое файла командой more.

```bash
mkdir Favorite_movies
cd Favorite_movies
touch my_top_10_movies.txt
echo Star Wars >> my_top_10_movies.txt
more my_top_10_movies.txt
```

```bash
mkdir Favorite_movies
cd Favorite_movies
touch my_top_10_movies.txt
nano my_top_10_movies.txt
more my_top_10_movies.txt
```

#### Любимые актеры

+ Создайте папку с именем «Favorite_actors» в домашнем каталоге вашего пользователя.
+ Измените свою текущую локацию на новую папку, которую вы только что создали.
+ Создайте там файл с именем «my_top_10_actors.txt».
+ Заполните файл своими любимыми актерами.
+ Выведите в окно терминала содержимое файла командой more.

```bash
mkdir Favorite_actors
cd Favorite_actors
touch my_top_10_actors.txt
echo Bruce Lee >> my_top_10_actors.txt
more my_top_10_actors.txt
```

```bash
mkdir Favorite_actors
cd Favorite_actors
touch my_top_10_actors.txt
nano my_top_10_actors.txt
   [отредактировать файл и сохранить изменения]
more my_top_10_actors.txt
```

#### Объединение

+ Переместите файл «my_top_10_movies.txt» в папку «Favorite_actors».
+ Удалите пустую папку «Favorite_movies».
+ Переименуйте папку «Favorite_actors» в «Top_movies_and_actors».

```bash
mv my_top_10_movies.txt Favorite_actors
rmdir Favorite_movies
mv Favorite_actors  Top_movies_and_actors
```

```bash
mv Favorite_movies/my_top_10_movies.txt Favorite_actors/
rmdir Favorite_movies/
mv Favorite_actors/ Top_movies_and_actors/
rm Top_movies_and_actors/ -r
```

---
[Содержание](#содержание)

## 6. Файловая структура

### 6.1 Важные директории, утилиты, архивирование

[Video](/Linux_to_certificate/videos/06_01_Важные_директории_утилиты_архивирование_Stepik.mp4)

Список изученных команд/утилит:

`df` -  отчет об использовании дисков
`du` -  вывод информации об использовании дискового пространства
`tar` - архиватор GNU
`zip` - сторонний архиватор

---
[Содержание](#содержание)

### 6.2 Резюме модуля `Файловая структура`. Контрольные вопросы

#### В какой системной папке принято хранить конфигурационные файлы?

+ [x] `/etc`
+ [ ] `/var`
+ [ ] `/bin`
+ [ ] `~`
+ [ ] `/config`

#### Какой каталог является точкой монтирования внешних дисков по умолчанию?

+ [ ] `/cdrom`
+ [ ] `/tmp`
+ [ ] `/dev`
+ [x] `/media`
+ [ ] `/bin`

#### Какая команда из перечисленных позволит увидеть путь, по которому был смонтирован дополнительный диск?

+ [ ] tar -xf
+ [x] df -h
+ [ ] tree ~
+ [ ] du -sh

---
[Содержание](#содержание)

## 7. Управление пользователями и группами

### 7.1 Вывод информации о пользователях

[Video](/Linux_to_certificate/videos/07_01_Вывод_информации_о_пользователях_Stepik.mp4)

Список изученных команд:

+ `whoami` -  вывести имя пользователя (логин)
+ `id` -  вывести UID, GID, логин, список дополнительных групп пользователя
+ `groups` -  вывести список групп пользователя
+ `su` - (substitute user) - сменить пользователя
+ `sudo` - (super user do) исполнить команду от имени суперпользователя
+ `users` - минимальная информация (только логины)
+ `w` - расширенная информация
+ `who` - средняя информативность между `users` и `w`
+ `exit` - возврат к предыдущему пользователю
+ `sudo su` - переключение в режим `root`

---
[Содержание](#содержание)

### 7.2 Создание пользователей

[Video](/Linux_to_certificate/videos/07_02_Создание_пользователеи_Stepik.mp4)

Список изученных команд:

+ `useradd` - создать пользователя (основная команда)
+ `adduser` - создать пользователя (perl-скрипт)
+ `passwd` - сменить пароль пользователю

---
[Содержание](#содержание)

### 7.3 Изменение пользователей

[Video](/Linux_to_certificate/videos/07_03_Изменение_пользователеи_Stepik.mp4)

Список изученных команд:

+ `usermod` - изменить пользователя
+ `usermod -L` - заблокировать пользователя
+ `usermod -U` - разблокировать пользователя

---
[Содержание](#содержание)

### 7.4 Права root, удаление пользователей

[Video](/Linux_to_certificate/videos/07_04_Права_root_удаление_пользователеи_Stepik.mp4)

Список изученных команд:

+ `visudo` - редактировать файл sudoers (права доступа)
+ `userdel` - удалить пользователя

---
[Содержание](#содержание)

### 7.5 Управление группами

[Video](/Linux_to_certificate/videos/07_05_Управление_группами_Stepik.mp4)

Список изученных команд:

+ `groupadd` - создать группу
+ `addgroup` - создать группу
+ `groupdel` - удалить группу

---
[Содержание](#содержание)

### 7.6 Резюме модуля `Управление пользователями`. Контрольные вопросы

#### Какая команда выведет следующую информацию о пользователе: UID, GID, список групп?

+ [ ] `groups`
+ [ ] `whoami`
+ [x] `id`
+ [ ] `who`

#### Какая команда позволит переключитсья в режим суперпользователя?

+ [x] `sudo su`
+ [x] `su root`
+ [ ] `user root`
+ [ ] `su sudo`

#### Какая команда при создании пользователя позволит сразу задать ему пароль?

+ [ ] `sudo useradd -s /bin/bash outgoinghr`
+ [x] `sudo adduser outgoinghr`
+ [ ] `sudo useradd -s /bin/bash -m -d outgoinghr`
+ [ ] Все приведенные варианты.

#### Какая команда сменит пароль пользователю officemanager?

+ [ ] `su officemanager`
+ [x] `sudo passwd officemanager`
+ [ ] `sudo useradd officemanager`
+ [ ] `sudo officemanager`

#### В каком файле хранятся хэши паролей пользователей?

+ [x] `/etc/shadow`
+ [ ] `/etc/group`
+ [ ] `/etc/passwd`
+ [ ] `/bin/bash`

#### Какая команда заблокирует пользователя smileygirl?

+ [x] `sudo usermod –L smileygirl`
+ [ ] `su smileygirl`
+ [ ] `sudo usermod –U smileygirl`
+ [ ] `sudo adduser smileygirl`

#### Членство пользователя в группе sudo дает ему права root. Редактирование какого файла позволит это изменить?

+ [ ] `/etc/passwd`
+ [x] `/etc/sudoers`
+ [ ] `/etc/users`
+ [ ] `/etc/shadow`

#### Напишите команду, выводящую список групп пользователя root

```bash
groups root
```

```sh
root : root
```

---
[Содержание](#содержание)

## 8. Права доступа (rwx)

### 8.1 Вывод информации + команда `chmod`

[Video](/Linux_to_certificate/videos/08_01_Вывод_информации_о_пользователях_Stepik.mp4)

Список изученных команд:

+ `chmod` - изменить права доступа к файлам
+ `chown` - изменить владельца/группу владельцев файла
+ `chgrp` - сменить группу владельцев
+ `umask` - сменить или вывести маску для создания файлов

#### chmod

```bash
chmod --help
Usage: chmod [OPTION]... MODE[,MODE]... FILE...
  or:  chmod [OPTION]... OCTAL-MODE FILE...
  or:  chmod [OPTION]... --reference=RFILE FILE...
Change the mode of each FILE to MODE.
With --reference, change the mode of each FILE to that of RFILE.

  -c, --changes          like verbose but report only when a change is made
  -f, --silent, --quiet  suppress most error messages
  -v, --verbose          output a diagnostic for every file processed      
      --no-preserve-root  do not treat '/' specially (the default)
      --preserve-root    fail to operate recursively on '/'
      --reference=RFILE  use RFILE's mode instead of MODE values
  -R, --recursive        change files and directories recursively
      --help     display this help and exit
      --version  output version information and exit

Each MODE is of the form '[ugoa]*([-+=]([rwxXst]*|[ugo]))+|[-+=][0-7]+'.

GNU coreutils online help: <https://www.gnu.org/software/coreutils/>
Report any translation bugs to <https://translationproject.org/team/>
Full documentation <https://www.gnu.org/software/coreutils/chmod>
or available locally via: info '(coreutils) chmod invocation'
```

---
[Содержание](#содержание)

### 8.2 Смена владельцев и групп

[Video](/Linux_to_certificate/videos/08_02_Смена_владельцев_и_групп_Stepik.mp4)

Список изученных команд:

+ `chmod` - изменить права доступа к файлам
+ `chown` - изменить владельца/группу владельцев файла
+ `chgrp` - сменить группу владельцев
+ `umask` - сменить или вывести маску для создания файлов

#### chown

```bash
#$ chown --help # административная команда, требует sudo
Usage: chown [OPTION]... [OWNER][:[GROUP]] FILE...
  or:  chown [OPTION]... --reference=RFILE FILE...
Change the owner and/or group of each FILE to OWNER and/or GROUP.
With --reference, change the owner and group of each FILE to those of RFILE. 

  -c, --changes          like verbose but report only when a change is made  
  -f, --silent, --quiet  suppress most error messages
  -v, --verbose          output a diagnostic for every file processed        
      --dereference      affect the referent of each symbolic link (this is  
                         the default), rather than the symbolic link itself  
  -h, --no-dereference   affect symbolic links instead of any referenced file
                         (useful only on systems that can change the
                         ownership of a symlink)
      --from=CURRENT_OWNER:CURRENT_GROUP
                         change the owner and/or group of each file only if  
                         its current owner and/or group match those specified
                         here.  Either may be omitted, in which case a match 
                         is not required for the omitted attribute
      --no-preserve-root  do not treat '/' specially (the default)
      --preserve-root    fail to operate recursively on '/'
      --reference=RFILE  use RFILE's owner and group rather than
                         specifying OWNER:GROUP values
  -R, --recursive        operate on files and directories recursively        

The following options modify how a hierarchy is traversed when the -R        
option is also specified.  If more than one is specified, only the final
one takes effect.

  -H                     if a command line argument is a symbolic link
                         to a directory, traverse it
  -L                     traverse every symbolic link to a directory
                         encountered
  -P                     do not traverse any symbolic links (default)

      --help     display this help and exit
      --version  output version information and exit

Owner is unchanged if missing.  Group is unchanged if missing, but changed
to login group if implied by a ':' following a symbolic OWNER.
OWNER and GROUP may be numeric as well as symbolic.

Examples:
  chown root /u        Change the owner of /u to "root".
  chown root:staff /u  Likewise, but also change its group to "staff".
  chown -hR root /u    Change the owner of /u and subfiles to "root".

GNU coreutils online help: <https://www.gnu.org/software/coreutils/>
Report any translation bugs to <https://translationproject.org/team/>
Full documentation <https://www.gnu.org/software/coreutils/chown>
or available locally via: info '(coreutils) chown invocation'
```

#### chgrp

```bash
$ chgrp --help
Usage: chgrp [OPTION]... GROUP FILE...
  or:  chgrp [OPTION]... --reference=RFILE FILE...
Change the group of each FILE to GROUP.
With --reference, change the group of each FILE to that of RFILE.

  -c, --changes          like verbose but report only when a change is made  
  -f, --silent, --quiet  suppress most error messages
  -v, --verbose          output a diagnostic for every file processed        
      --dereference      affect the referent of each symbolic link (this is  
                         the default), rather than the symbolic link itself  
  -h, --no-dereference   affect symbolic links instead of any referenced file
                         (useful only on systems that can change the
                         ownership of a symlink)
      --no-preserve-root  do not treat '/' specially (the default)
      --preserve-root    fail to operate recursively on '/'
      --reference=RFILE  use RFILE's group rather than specifying a
                         GROUP value
  -R, --recursive        operate on files and directories recursively        

The following options modify how a hierarchy is traversed when the -R        
option is also specified.  If more than one is specified, only the final     
one takes effect.

  -H                     if a command line argument is a symbolic link       
                         to a directory, traverse it
  -L                     traverse every symbolic link to a directory
                         encountered
  -P                     do not traverse any symbolic links (default)        

      --help     display this help and exit
      --version  output version information and exit

Examples:
  chgrp staff /u      Change the group of /u to "staff".
  chgrp -hR staff /u  Change the group of /u and subfiles to "staff".

GNU coreutils online help: <https://www.gnu.org/software/coreutils/>
Report any translation bugs to <https://translationproject.org/team/>
Full documentation <https://www.gnu.org/software/coreutils/chgrp>
or available locally via: info '(coreutils) chgrp invocation'
```

---
[Содержание](#содержание)

### 8.3 Специальные биты, права по умолчанию

[Video](/Linux_to_certificate/videos/08_03_Специальные_биты_права_по_умолчанию_Stepik.mp4)

Список изученных команд:

+ `chmod` - изменить права доступа к файлам
+ `chown` - изменить владельца/группу владельцев файла
+ `chgrp` - сменить группу владельцев
+ `umask` - сменить или вывести маску для создания файлов

#### umask

```bash
$ umask --help
umask: umask [-p] [-S] [mode]
    Display or set file mode mask.

    Sets the user file-creation mask to MODE.  If MODE is omitted, prints       
    the current value of the mask.

    If MODE begins with a digit, it is interpreted as an octal number;
    otherwise it is a symbolic mode string like that accepted by chmod(1).      

    Options:
      -p        if MODE is omitted, output in a form that may be reused as input
      -S        makes the output symbolic; otherwise an octal number is output  

    Exit Status:
    Returns success unless MODE is invalid or an invalid option is given. 
```

---
[Содержание](#содержание)

### 8.4 Резюме модуля `Права доступа`. Контрольные вопросы

#### Какая из приведенных команд даст скрипту права на исполнение?

+ [ ] `chmod 666 myscript.sh`
+ [x] `chmod u+x myscript.sh`
+ [ ] `chown 666 myscript.sh`
+ [ ] `chown u+x myscript.sh`

#### Какая команда изменит права доступа у текущей папки и одновременно у всех файлов внутри нее?

+ [x] `chmod 764 -R .`
+ [ ] `chmod a=rw important_file`
+ [ ] `chmod 764 .`
+ [ ] `chmod 640 important_file`

#### Какая команда изменит группу владельцев у файла f2?

+ [x] `sudo chown :remote_workers f2`
+ [ ] `chown :remote_workers f2`
+ [ ] `chown remote_workers f2`
+ [ ] `sudo chown remote_workers f2`

#### Чтобы поднять Sticky bit на папке, мы используем команду

+ [ ] `chmod -t .`
+ [ ] `chmod u+s .`
+ [x] `chmod +t .`
+ [ ] `chmod g+s .`

#### У какой системной папки поднят Sticky bit по умолчанию?

+ [x] `/tmp`
+ [ ] `/shared_folder`
+ [ ] `/temp`
+ [ ] `/home`

---
[Содержание](#содержание)

## 9. Важные инструменты терминала Linux

### 9.1 Ссылки, iNodes

[Video](/Linux_to_certificate/videos/09_01_Ссылки_iNodes_Stepik.mp4)

Список изученных команд:

+ `ln` - создать жесткую ссылку на файл
+ `ln -s` - создать мягкую ссылку на файл
+ `ls -li` - вывести список файлов в табличном виде, включая номера файлов (iNodes)

#### ln

```bash
$ ln --help
Usage: ln [OPTION]... [-T] TARGET LINK_NAME
  or:  ln [OPTION]... TARGET
  or:  ln [OPTION]... TARGET... DIRECTORY
  or:  ln [OPTION]... -t DIRECTORY TARGET...
In the 1st form, create a link to TARGET with the name LINK_NAME.
In the 2nd form, create a link to TARGET in the current directory.
In the 3rd and 4th forms, create links to each TARGET in DIRECTORY.
Create hard links by default, symbolic links with --symbolic.
By default, each destination (name of new link) should not already exist.
When creating hard links, each TARGET must exist.  Symbolic links
can hold arbitrary text; if later resolved, a relative link is
interpreted in relation to its parent directory.

Mandatory arguments to long options are mandatory for short options too.
      --backup[=CONTROL]      make a backup of each existing destination file
  -b                          like --backup but does not accept an argument
  -d, -F, --directory         allow the superuser to attempt to hard link
                                directories (note: will probably fail due to
                                system restrictions, even for the superuser)
  -f, --force                 remove existing destination files
  -i, --interactive           prompt whether to remove destinations
  -L, --logical               dereference TARGETs that are symbolic links
  -n, --no-dereference        treat LINK_NAME as a normal file if
                                it is a symbolic link to a directory
  -P, --physical              make hard links directly to symbolic links
  -r, --relative              create symbolic links relative to link location
  -s, --symbolic              make symbolic links instead of hard links
  -S, --suffix=SUFFIX         override the usual backup suffix
  -t, --target-directory=DIRECTORY  specify the DIRECTORY in which to create
                                the links
  -T, --no-target-directory   treat LINK_NAME as a normal file always
  -v, --verbose               print name of each linked file
      --help     display this help and exit
      --version  output version information and exit

The backup suffix is '~', unless set with --suffix or SIMPLE_BACKUP_SUFFIX.
The version control method may be selected via the --backup option or through
the VERSION_CONTROL environment variable.  Here are the values:

  none, off       never make backups (even if --backup is given)
  numbered, t     make numbered backups
  existing, nil   numbered if numbered backups exist, simple otherwise
  simple, never   always make simple backups

Using -s ignores -L and -P.  Otherwise, the last option specified controls
behavior when a TARGET is a symbolic link, defaulting to -P.

GNU coreutils online help: <https://www.gnu.org/software/coreutils/>
Report any translation bugs to <https://translationproject.org/team/>
Full documentation <https://www.gnu.org/software/coreutils/ln>
or available locally via: info '(coreutils) ln invocation'
```

---
[Содержание](#содержание)

### 9.2 Потоки ввода-вывода

[Video](/Linux_to_certificate/videos/09_02_Потоки_ввода_вывода_Stepik.mp4)

Список изученных команд:

+ `cat > console_input.txt` - ввести текст с консоли в файл (пересоздать файл)
+ `cat >> console_input.txt` - ввести текст с консоли в файл (дописать в конец файла)
+ `find / -type f -name *.sh 1>bash_files.txt 2>errors.txt` - результаты работы команды find отправить в файл bash_files.txt, ошибки отправить в файл errors.txt
+ `find / -type f -name *.sh 1>all_files.txt 2>&1` - результаты работы команды (первый поток) find отправить в файл all_files.txt, ошибки отправить туда же, куда и первый поток

---
[Содержание](#содержание)

### 9.3 Конвейер обработки команд

[Video](/Linux_to_certificate/videos/09_03_Конвеиер_обработки_команд_Stepik.mp4)

Список изученных команд:

+ `sudo apt install pandoc` - установить утилиту pandoc
+ `pandoc -t plain https://shakespeare.mit.edu/romeo_juliet/full.html > romeo_and_juliet_poem.txt` - скачать текст поэмы Ромэо и Джульета (на англ. яз.)
+ `cat romeo_poem.txt | grep 'Capulet' | wc -l` - сколько раз встречается слово 'Capulet' в файле romeo_poem.txt
+ `cat /var/log/syslog | grep 'ssh' | grep -v root` - фильтрация логов с помощью конвейера обработки команд
+ `head romeo_file.txt || echo error` - вывести первые 10 строк файла или вывести сообщение об ошибке
+ `head Romeo_file.txt && echo Done` - вывести первые 10 строк файла и вывести слово 'Done'
+ `mkdir testdir && touch testdir/testfile`  - создать папку и создать файл в ней
+ `ls -al ~/testdir || mkdir ~/testdir` - вывести содержимое папки или создать ее

#### grep

```bash
$ grep --help
Usage: grep [OPTION]... PATTERN [FILE]...
Search for PATTERN in each FILE or standard input.
PATTERN is, by default, a basic regular expression (BRE).
Example: grep -i 'hello world' menu.h main.c

Regexp selection and interpretation:
  -E, --extended-regexp     PATTERN is an extended regular expression (ERE)
  -F, --fixed-strings       PATTERN is a set of newline-separated strings  
  -G, --basic-regexp        PATTERN is a basic regular expression (BRE)    
  -P, --perl-regexp         PATTERN is a Perl regular expression
  -e, --regexp=PATTERN      use PATTERN for matching
  -f, --file=FILE           obtain PATTERN from FILE
  -i, --ignore-case         ignore case distinctions
  -w, --word-regexp         force PATTERN to match only whole words        
  -x, --line-regexp         force PATTERN to match only whole lines        
  -z, --null-data           a data line ends in 0 byte, not newline        

Miscellaneous:
  -s, --no-messages         suppress error messages
  -v, --invert-match        select non-matching lines
  -V, --version             display version information and exit
      --help                display this help text and exit

Output control:
  -m, --max-count=NUM       stop after NUM matches
  -b, --byte-offset         print the byte offset with output lines
  -n, --line-number         print line number with output lines
      --line-buffered       flush output on every line
  -H, --with-filename       print the file name for each match
  -h, --no-filename         suppress the file name prefix on output
      --label=LABEL         use LABEL as the standard input file name prefix
  -o, --only-matching       show only the part of a line matching PATTERN
  -q, --quiet, --silent     suppress all normal output
      --binary-files=TYPE   assume that binary files are TYPE;
                            TYPE is 'binary', 'text', or 'without-match'
  -a, --text                equivalent to --binary-files=text
  -I                        equivalent to --binary-files=without-match
  -d, --directories=ACTION  how to handle directories;
                            ACTION is 'read', 'recurse', or 'skip'
  -D, --devices=ACTION      how to handle devices, FIFOs and sockets;
                            ACTION is 'read' or 'skip'
  -r, --recursive           like --directories=recurse
  -R, --dereference-recursive  likewise, but follow all symlinks
      --include=FILE_PATTERN  search only files that match FILE_PATTERN
      --exclude=FILE_PATTERN  skip files and directories matching FILE_PATTERN
      --exclude-from=FILE   skip files matching any file pattern from FILE
      --exclude-dir=PATTERN  directories that match PATTERN will be skipped.
  -L, --files-without-match  print only names of FILEs containing no match
  -l, --files-with-matches  print only names of FILEs containing matches
  -c, --count               print only a count of matching lines per FILE
  -T, --initial-tab         make tabs line up (if needed)
  -Z, --null                print 0 byte after FILE name

Context control:
  -B, --before-context=NUM  print NUM lines of leading context
  -A, --after-context=NUM   print NUM lines of trailing context
  -C, --context=NUM         print NUM lines of output context
  -NUM                      same as --context=NUM
      --color[=WHEN],
      --colour[=WHEN]       use markers to highlight the matching strings;
                            WHEN is 'always', 'never', or 'auto'
  -U, --binary              do not strip CR characters at EOL (MSDOS/Windows)
  -u, --unix-byte-offsets   report offsets as if CRs were not there
                            (MSDOS/Windows)

'egrep' means 'grep -E'.  'fgrep' means 'grep -F'.
Direct invocation as either 'egrep' or 'fgrep' is deprecated.
When FILE is -, read standard input.  With no FILE, read . if a command-line
-r is given, - otherwise.  If fewer than two FILEs are given, assume -h.
Exit status is 0 if any line is selected, 1 otherwise;
if any error occurs and -q is not given, the exit status is 2.

Report bugs to: bug-grep@gnu.org
GNU grep home page: <https://www.gnu.org/software/grep/>
General help using GNU software: <http://www.gnu.org/gethelp/>
```

---
[Содержание](#содержание)

### 9.4 Резюме модуля `Важные инструменты`. Контрольные вопросы

#### Выведите в терминал строку "Hello world"

```bash
echo "Hello world"
```

#### Какая команда создаст жесткую ссылку на файл?

+ [ ] `ls main_config_file hardlink_to_configs`
+ [ ] `ln -s main_config_file hardlink_to_configs`
+ [x] `ln main_config_file hardlink_to_configs`
+ [ ] `ls -s main_config_file hardlink_to_configs`

#### Какая команда допишет новую строку в файл, не очищая предыдущее содержимое файла?

+ [x] `echo "some line of text" >> report_2020`
+ [ ] `echo "some line of text" > report_2020`
+ [ ] `tail "some line of text" >> report_2020`
+ [ ] `tail "some line of text" > report_2020`

#### Какая команда отправит результаты поиска в файл bash_files.txt, а ошибки будет выводить в окно терминала?

+ [ ] `find / -type f -name *.sh 1>bash_files.txt 2>errors.txt`
+ [ ] `find / -type f -name *.sh`
+ [x] `find / -type f -name *.sh > bash_files.txt`
+ [ ] `find / -type f -name *.sh 1>all_results.txt 2>&1`

#### Как узнать: сколько строк в файле с системными логами содержат упоминание службы cron?

+ [ ] `grep /var/log/syslog | cat 'cron' | wc -l`
+ [x] `cat /var/log/syslog | grep 'cron' | wc -l`
+ [ ] `grep /var/log/syslog | cat 'cron' | wc -w`
+ [ ] `cat /var/log/syslog | grep 'cron' | wc -w`

#### Как вывести содержимое файла либо (если файла нет) вывести сообщение об ошибке?

+ [ ] `cat romeo_file.txt ; echo error`
+ [ ] `cat romeo_file.txt | echo error`
+ [ ] `cat romeo_file.txt || echo error`
+ [ ] `cat romeo_file.txt & echo error`
+ [ ] `cat romeo_file.txt && echo error`

---
[Содержание](#содержание)

## 10. Инструменты для мониторинга

### 10.1 Утилита top (диспетчер задач)

[Video](/Linux_to_certificate/videos/10_01_Утилита_top_диспетчер_задач_Stepik.mp4)

**Список изученных команд:**

`top –o -PID` - запустить утилиту top с сортировкой по полю PID<br>
`top –u salesguy` - запустить утилиту top с фильтрацией процессов по пользователю salesguy

---
[Содержание](#содержание)

### 10.2 Утилиты htop, ps, kill, systemctl

[Video](/Linux_to_certificate/videos/10_02_Утилиты_htop_ps_kill_systemctl_Stepik.mp4)

**Список изученных команд:**

+ `sudo apt-get install htop` - установить утилиту `htop`
+ `ps` - вывести инфо о текущем процессе
+ `ps 1` - вывести инфо о процессе номер 1
+ `ps aux` - вывести снимок состояния всех процессов в виде таблицы
+ `ps afx` - вывести снимок состояния всех процессов в виде дерева
+ `pidof` - найти номер процесса по его имени
+ `kill` - завершить процесс
+ `systemctl` - утилита для управления службами
+ `systemctl status ssh` - вывести инфо о состоянии службы SSH
+ `systemctl stop ssh` - остановить службу SSH
+ `systemctl start ssh` - запустить службу SSH
+ `systemctl is-active ssh` - проверить: запущена ли служба SSH

---
[Содержание](#содержание)

### 10.3 Резюме модуля `Инструменты для мониторинга`. Контрольные вопросы

#### Как запустить диспетчер задач с сортировкой процессов по возрастанию номеров (PID)?

+ [ ] top -o PID
+ [ ] top -o -pid
+ [ ] top -o pid
+ [x] top -o -PID

#### Какая команда выведет номер процесса (PID) браузера firefox?

+ [ ] kill firefox
+ [ ] ps firefox
+ [ ] systemctl firefox
+ [x] pidof firefox

#### Нужно прописать службу SSH в автозагрузку. Какая команда позволит это сделать?

+ [x] sudo systemctl enable ssh
+ [ ] sudo systemctl reload ssh
+ [ ] sudo systemctl start ssh
+ [ ] sudo systemctl status ssh

---
[Содержание](#содержание)

## 11. Управление программным обеспечением

### 11.1 Утилита apt / apt-get

[Video](/Linux_to_certificate/videos/11_01_Утилита_apt_apt-get_Stepik.mp4)

**Список изученных команд:**

+ `sudo apt update` - обновить список пакетов из репозиториев (подготовка обновления или установки ПО)
+ `sudo apt upgrade -y` - выполнить обновление ПО
+ `sudo apt-get install htop` - установить утилиту `htop`
+ `sudo apt-get remove htop` - удалить утилиту `htop`
+ `sudo apt-get purge htop` - удалить утилиту `htop` вместе с настройками
+ `apt moo` - коровья суперсила
+ `aptitude moo -vvvvv` - коровья суперсила 2
+ `sudo apt install cowsay` - коровья суперсила 3

---
[Содержание](#содержание)

### 11.2 Утилиты dpkg, snap

[Video](/Linux_to_certificate/videos/11_02_Утилиты_dpkg_snap_Stepik.mp4)

**Список изученных команд:**

+ `dpkg -l` - вывести список установленных пакетов
+ `dpkg -l | wc -l` - вывести количество установленных пакетов
+ `dpkg –l tree` - вывести инфо о пакете `tree`
+ `apt show tree` - вывести инфо о пакете `tree`
+ `apt download htop` - скачать пакет в виде `*.deb` файла
+ `sudo dpkg -i htop_3.0-11_amd64.deb` - установить пакет утилитой `dpkg`
+ `sudo apt install snapd` - установить пакетный менеджер `snap`
+ `apt search opera` - поискать пакет opera в репозиториях `apt`
+ `snap find opera` - поискать пакет opera в репозиториях snap
+ `snap list` - вывести список пакетов, утановленных менеджером snap
+ `sudo snap install opera` - установить пакет `opera`
+ `sudo snap remove opera` - удалить пакет `opera`

---
[Содержание](#содержание)

### 11.3 Добавление репозитория

[Video](/Linux_to_certificate/videos/11_03_Добавление_репозитория_Stepik.mp4)

[Video](/Linux_to_certificate/videos/11_04_Добавление_репозитория_Stepik.mp4)

[Video](/Linux_to_certificate/videos/11_05_Добавление_репозитория_Stepik.mp4)

**Конспект урока:**

**Команды:**

```sh
# скачать deb-пакет VirtualBox с официального сайта
wget https://download.virtualbox.org/virtualbox/7.1.4/virtualbox-7.1_7.1.4-165100~Ubuntu~jammy_amd64.deb

ls
# установить deb-пакет из скачанного файла
sudo dpkg -i virtualbox-7.1_7.1.4-165100~Ubuntu~jammy_amd64.deb
# удалить пакет VirtualBox
sudo dpkg -r virtualbox-7.1

# работа с каталогом /etc/apt
ls /etc/apt
cd /etc/apt
ll

# вывод указанного файла на экран
cat sources.list
# создание нового файла для указания репозитория VirtualBox
sudo nano sources.list.d/vbox.list
# просмотр каталога
ls sources.list.d
tree

# вывод созданного файла на экран
cat sources.list.d/vbox.list
# скачать и установить ключ репозитория VirtualBox
wget -O- https://www.virtualbox.org/download/oracle_vbox_2016.asc | sudo gpg --yes --output /usr/share/keyrings/oracle-virtualbox-2016.gpg --dearmor
# обновить списки репозиториев (важно после добавления нового репо)
sudo apt update
# установить пакет VirtualBox из репозитория
sudo apt install virtualbox

# вызов справки по VirtualBox (для подтверждения успешной уствновки)
whatis virtualbox
virtualbox --help

# вывод кодового имени дистрибутива
lsb_release -a

# вызов полной справки по команде add-apt-repository
man add-apt-repository
# установка дополнительного пакета для утилиты add-apt-repository
sudo apt install software-properties-common
```

**Полезные ссылки:**

[Страница загрузки VirtualBox для Linux](https://www.virtualbox.org/wiki/Linux_Downloads)

[Путь к репозиторию VirtualBox для Debian-дистрибутивов](https://download.virtualbox.org/virtualbox/debian)

---
[Содержание](#содержание)

### 11.4 Резюме модуля `Управление ПО`. Контрольные вопросы

#### Обновление ПО выполняет команда

+ [ ] sudo apt update
+ [x] sudo apt upgrade
+ [ ] sudo apt install dpkg
+ [ ] sudo apt download

#### Как удалить пакет tree вместе со всеми его настройками?

+ [ ] sudo apt-get remove tree
+ [ ] sudo apt remove tree
+ [x] sudo apt-get purge tree
+ [x] sudo apt purge tree

#### Какая утилита может управлять установленными пакетами, но не может обращаться к удаленным репозиториям?

+ [ ] snap
+ [x] dpkg
+ [ ] apt
+ [ ] apt-get

#### Необходимо вывести количество установленных пакетов

+ [ ] dpkg -l
+ [ ] apt list
+ [ ] apt-get list | wc -l
+ [x] dpkg -l | wc -l

#### Какая из приведенных команд позволит установить браузер Opera?

+ [ ] sudo snap find opera
+ [x] sudo snap install opera
+ [ ] sudo apt download opera
+ [ ] apt show opera

---
[Содержание](#содержание)

## 12. Планировщик задач

### 12.1 Служба cron, утилита crontab

[Video](/Linux_to_certificate/videos/12_01_Служба_cron_утилита_crontab_Stepik.mp4)

**Список изученных команд:**

+ `systemctl status cron` - проверить инфо о службе `cron`
+ `sudo systemctl start cron` - запустить службу `cron`
+ `crontab -l` - просмотр списка запланированных команд текущего пользователя
+ `crontab -e` - редактирование списка задач текущего пользователя
+ `crontab -r` - удаление списка задач текущего пользователя
+ `crontab -u user_name -e` - редактировать задачи другого пользователя

---
[Содержание](#содержание)

### 12.2 Настройка логов, задачи других пользователей

[Video](/Linux_to_certificate/videos/12_02_Настроика_логов_задачи_других_пользователеи_Stepik.mp4)

**Список изученных команд:**

+ `systemctl status cron` - проверить инфо о службе `cron`
+ `sudo systemctl start cron` - запустить службу `cron`
+ `crontab -l` - просмотр списка запланированных команд текущего пользователя
+ `crontab -e` - редактирование списка задач текущего пользователя
+ `crontab -r` - удаление списка задач текущего пользователя
+ `crontab -u user_name -e` - редактировать задачи другого пользователя

**Полезные ссылки:**

[Тренажер cron](https://crontab.guru/)

---
[Содержание](#содержание)

### 12.3 Резюме модуля `Планировщик задач`. Контрольные вопросы

#### Как удалить все задачи службы Cron у текущего пользователя?

+ [x] `crontab -r`
+ [ ] `crontab -e`
+ [ ] `crontab -u`
+ [ ] `crontab -l`

#### Укажите пример(-ы) корректного синтаксиса задач Cron

+ [x] `@hourly /run/my/script.sh`
+ [ ] `0 24 2 jan,jul,oct * /run/my/script.sh`
+ [ ] `0 22 * 1-5 /run/my/script.sh`
+ [ ] `60 0 1,15 * 3 /run/my/script.sh`
+ [x] `15 * * * * /run/my/script.sh`

#### Какая из приведенных команд утилиты crontab требует прав суперпользователя?

+ [ ] `crontab -e`
+ [x] `crontab -u officemanager -l`
+ [ ] `crontab -l`
+ [ ] `crontab -r`

---
[Содержание](#содержание)

## 13. Работа с фаерволом (утилита iptables)

### 13.1 Просмотр, добавление, удаление правил

[Video](/Linux_to_certificate/videos/13_01_Просмотр_добавление_удаление_правил_Stepik.mp4)

**Список изученных команд:**

+ `sudo apt install iptables` - если вдруг утилита `iptables` не установлена
+ `sudo iptables -L` - вывести списки текущих правил
+ `sudo iptables -A INPUT -j LOG` - добавить правило: логировать все входящие запросы
+ `sudo iptables -F INPUT` - очистить все правила в цепочке INPUT
+ `sudo iptables -A OUTPUT -j LOG` - добавить правило: логировать все исходящие запросы
+ `sudo iptables -A FORWARD -j LOG` - добавить правило: логировать все транзитные запросы
+ `hostname -I` - посмотреть IP-адрес
+ `ip a` - вывести инфо о сетевых подключениях (в том числе IP-адрес)
+ `sudo iptables -t filter -A INPUT -s 192.168.0.104 -j DROP` - добавить правило в таблицу `filter`, в цепочку `INPUT`: отклонять все запросы с указанного IP-адреса
+ `sudo iptables -t filter -A INPUT -s 192.168.0.107 -j ACCEPT` - добавить правило в таблицу `filter`, в цепочку `INPUT`: разрешать все запросы с указанного IP-адреса
+ `sudo iptables -L -nv --line-numbers` - вывести списке текущих правил с более подробной информацией
+ `sudo iptables -t filter -D INPUT 4` - удалить правило номер 4 в цепочке `INPUT`
+ `sudo iptables -A OUTPUT -p tcp --dport 80 –j REJECT` - отклонять исходящие запросы на 80 порту (HTTP запросы)

---
[Содержание](#содержание)

### 13.2 Политики по умолчанию, сохранение правил

[Video](/Linux_to_certificate/videos/13_02_Политики_по_умолчанию_сохранение_правил_Stepik.mp4)

**Список изученных команд:**

+ `sudo iptables -P INPUT DROP` - установить политику `DROP` (запретить) на цепочке правил для входящих запросов
+ `sudo iptables -P INPUT ACCEPT` - разрешить все входящие запросы по умолчанию (политикой)
+ `sudo iptables -I INPUT -p tcp --dport 22 -j ACCEPT` - разрешить входящие запросы на 22 порту (SSH запросы)
+ `sudo iptables-save > ~/iptables_config` - сохранить правила `iptables` в текстовый файл
+ `sudo iptables-restore < ~/iptables_config` - загрузить правила `iptables` из текстового файла

---
[Содержание](#содержание)

### 13.3 Резюме модуля `Работа с фаерволом`. Контрольные вопросы

#### Укажите название цепочки правил для входящего трафика в утилите iptables

+ [ ] `PREROUTING`
+ [ ] `OUTPUT`
+ [x] `INPUT`
+ [ ] `FORWARD`

#### Как удалить все правила в цепочке для исходящих запросов в утилите iptables?

+ [ ] `sudo iptables -L INPUT`
+ [ ] `sudo iptables -F INPUT`
+ [ ] `sudo iptables -L OUTPUT`
+ [ ] `sudo iptables -D INPUT`
+ [x] `sudo iptables -F OUTPUT`
+ [ ] `sudo iptables -D OUTPUT`

#### Какая команда для iptables запретит все входящие запросы по 22 порту (SSH подключение по умолчанию)?

+ [ ] `sudo iptables -A OUTPUT -p tcp --dport 22 –j ACCEPT`
+ [ ] `sudo iptables -A INPUT -p tcp --dport 22 –j ACCEPT`
+ [ ] `sudo iptables -A OUTPUT -p tcp --dport 22 –j REJECT`
+ [x] `sudo iptables -A INPUT -p tcp --dport 22 –j REJECT`

#### Запретить все входящие запросы с помощью политики по умолчанию

+ [ ] `sudo iptables -P INPUT ACCEPT`
+ [ ] `sudo iptables -P FORWARD DROP`
+ [ ] `sudo iptables -P OUTPUT DROP`
+ [x] `sudo iptables -P INPUT DROP`
+ [ ] `sudo iptables -P OUTPUT ACCEPT`
+ [ ] `sudo iptables -P FORWARD ACCEPT`

---
[Содержание](#содержание)

## 14. Bash

### 14.1 История создания, запуск скриптов, оболочка

[Video](/Linux_to_certificate/videos/14_01_История_создания_запуск_скриптов_оболочка_Stepik.mp4)

**Список изученных команд:**

+ `chmod u+x hello_world.sh` - дать файлу права на исполнение
+ `whereis bash` - посмотреть расположение интерпретатора `bash`
+ `whereis python3` - посмотреть расположение интерпретатора `python3`
+ `echo $0` - вывести название текущей оболочки
+ `echo $SHELL` - вывести путь к файлу текущей оболочки
+ `cat /etc/shells` - вывести список оболочек на данной машине

**Текст скриптов:**

файл hello_world.sh:

```sh
echo "Who am I? - " $USER
echo "Where am I? - " $(pwd)
echo "Where? - " $(uname)
echo "Where am I from? - " $HOME
```

файл calendar.py:

```bash
#! /usr/bin/python3
# Program to display calendar of the given month and year
# importing calendar module

import calendar
yy = 2035  # year
mm = 11    # month

# To take month and year input from the user
# yy = int(input("Enter year: "))
# mm = int(input("Enter month: "))
# display the calendar

print(calendar.month(yy, mm)):
```

---
[Содержание](#содержание)

### 14.2 Синтаксис Bash: условия, ветвления

[Video](/Linux_to_certificate/videos/14_02_Синтаксис_Bash_условия_ветвления_Stepik.mp4)

**Текст скриптов:**

файл height_check.sh:

```bash
#!/bin/bash

if [ $1 == 100 ]; then
     echo "Проходи и возьми бесплатное мороженое, дружок!"
elif [ $1 -gt 100 ]; then
     echo "Извините. Вход только для детей"
elif [ $1 -lt 100 ] && [ $1 -gt 50 ]; then
     echo "Добро пожаловать на карусели! Мы ждали именно тебя!"
else
     echo "Где твои родители, малыш?"
fi
```

файл remember_the_pi:

```bash
#!/bin/bash

case $1 in
  3)
    echo "Мой попугай знает больше!"
    ;;
  3.14)
    echo "А поточнее? Еще разок?"
    ;;
  3.1415)
    echo "Неплохо! В уме посчитали?"
    ;;
  3.141592)
    echo "Готов зачислить Вас в МГУ без экзаменов!"
    ;;
  3.14159265)
    echo "Господин Эйнштейн, приятно Вас снова видеть!"
    ;;
  3.1415926535)
    echo "Читер! Так не честно. Волшебными палочками и Гуглом не пользуемся!"
    ;;
  *)
    echo "Даже не знаю, что и сказать... Попробуйте еще разок!"
    ;;
esac
```

---
[Содержание](#содержание)

### 14.3 Синтаксис Bash: циклы, функции

[Video](/Linux_to_certificate/videos/14_03_Синтаксис_Bash_циклы_функции_Stepik.mp4)

Текст скриптов:

```bash
# пример однострочного скрипта:
for n in {1..5}; do echo $n"-й раз выполняется тело цикла"; done

# пример функции 1:

function for_loop() {
for n in {1..5}
    do echo $n"-й раз выполняется тело цикла"
done
}

# пример функции 2:

function for_loop_advanced() {
count=$1
for n in $(seq $count)
    do echo $n"-й раз выполняется тело цикла"
done
}

# вызов функции 2:

for_loop_advanced 3
```

```bash
# пример цикла until:

#!/bin/bash

x=1
until [ $x -lt 5 ]
do
  echo $x
  let x=x+1
done
```

```bash
# пример цикла while:

#!/bin/bash

x=1
while [ $x -gt 5 ]
do
  echo $x
  let x=x+1
done
```

---
[Содержание](#содержание)

### 14.4 Резюме модуля `Bash`. Контрольные вопросы

#### Напишите команду, которая выведет путь к интерпретатору bash. Надо узнать: где он находится

```sh
whereis bash
```

```sh
bash: /bin/bash /etc/bash.bashrc
```

#### Выберите корректный вариант указания интерпретатора BASH в shebang-строке

+ [ ] `*! /bin/bash`
+ [ ] `#* /bin/bash`
+ [ ] `?# /bin/bash`
+ [ ] `#? /bin/bash`
+ [x] `#! /bin/bash`
+ [ ] `!# /bin/bash`

#### Мы только что написали скрипт mysuperscript.sh. Укажите набор команд, чтобы гарантированно исполнить этот скрипт

+ [ ] `chmod 666 mysuperscript.sh`<br>
`./mysuperscript.sh`
+ [ ] `chown u-x mysuperscript.sh`<br>
`./mysuperscript.sh`
+ [x] `chmod u+x mysuperscript.sh`<br
`./mysuperscript.sh`
+ [ ] `chown u+x mysuperscript.sh`<br>
`mysuperscript.sh`

#### Как узнать путь к интерпретатору perl для указания его в shebang-строке?

+ [ ] `whatis perl`
+ [ ] `cat /etc/passwd`
+ [x] `whereis perl`
+ [ ] `perl --help`

---
[Содержание](#содержание)
